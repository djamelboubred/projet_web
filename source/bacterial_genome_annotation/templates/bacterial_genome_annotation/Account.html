{% extends 'bacterial_genome_annotation/Base.html' %} {% block content %}
{% load mytags %}
{% if own %}
<h2>Your account</h2>
{% else %}
<h2>{{user.first_name}}'s account</h2>
{% endif %}
<h3>General informations</h3>
<table>
  <tr>
    <td>First name</td>
    <td>{{user.first_name}}</td>
  </tr>
  <tr>
    <td>Last name</td>
    <td>{{user.last_name}}</td>
  </tr>
  <tr>
    <td>Phone number</td>
    <td>{{user.phone_no}}</td>
  </tr>
  <tr>
    <td>Profile picture</td>
    <td><img src="{{ user.picture.url }}" width="100" height="100" /></td>
  </tr>
</table>

{% if own %}
<br>
<div class="d-flex justify-content-end">
<button type="button" class="btn btn-secondary" >
  <a href="{% url 'account_modification' %}">Modify</a>
</button>
</div>
{% else %}
  {% if isFriend %}
    <button type="button">
      <a href="{% url 'remove_friend' user.id %}">Remove from favorites</a>
    </button>
  {% else %}
    <button type="button">
      <a href="{% url 'add_friend' user.id %}">Add to favorites</a>
    </button>
  {% endif %}
{% endif %}
<h3>Authentification</h3>
  <table>
    <tr>
      <td>Registration date</td>
      <td>{{user.date_joined}}</td>
    </tr>
    <tr>
      <td>Role</td>
      <td>{{role}}</td>
    </tr>
    <tr>
      <td>Email address</td>
      <td>{{user.email}}</td>
    </tr>
  </table>
  <h3>Assigned sequences</h3>
  <!--New annotation needed-->
  <table>
    <thead>
      <tr>
        <th colspan="2">New annotation needed</th>
      </tr>
    </thead>
    <tbody>
      {% for a in assignationsNew %}
      <tr>
        <td>
          <a
            id="QuerySequence"
            class="form-control"
            href="{% url 'sequence' id=a.sequence.id %}"
          >
            {{ a.sequence.id }} - {{ a.sequence.genome.id|replaceWithSpace:"_" }}</a
          >
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <!--Revision needed-->
  <table>
    <thead>
      <tr>
        <th colspan="2">Revision needed</th>
      </tr>
    </thead>
    <tbody>
      {% for a in assignationsRevision %}
      <tr>
        <td>
          <a
            id="QuerySequence"
            class="form-control"
            href="{% url 'sequence' id=a.sequence.id %}"
          >
            {{ a.sequence.id }} - {{ a.sequence.genome.id|replaceWithSpace:"_" }}</a
          >
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <!--Validation needed-->
  <table>
    <thead>
      <tr>
        <th colspan="2">Validation needed</th>
      </tr>
    </thead>
    <tbody>
      {% for a in validations %}
      <tr>
        <td>
          <a
            id="QuerySequence"
            class="form-control"
            href="{% url 'sequence' id=a.seq.id %}"
          >
            {{ a.sequence.id }} - {{ a.sequence.genome.id|replaceWithSpace:"_" }}</a
          >
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <!--Waiting for validation-->
  <table>
    <thead>
      <tr>
        <th colspan="2">Waiting for validation</th>
      </tr>
    </thead>
    <tbody>
      {% for a in assignationsDone %}
      <tr>
        <td>
          <a
            id="QuerySequence"
            class="form-control"
            href="{% url 'sequence' id=a.sequence.id %}"
          >
            {{ a.sequence.id }} - {{ a.sequence.genome.id|replaceWithSpace:"_" }}</a
          >
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <!--My validated annotations-->
  <table>
    <thead>
      <tr>
        <th colspan="2">My validated annotations</th>
      </tr>
    </thead>
    <tbody>
      {% for a in assignationsValidated %}
      <tr>
        <td>
          <a
            id="QuerySequence"
            class="form-control"
            href="{% url 'sequence' id=a.sequence.id %}"
          >
            {{ a.sequence.id }} - {{ a.sequence.genome.id|replaceWithSpace:"_" }}</a
          >
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <!--Annotations I validated-->
  <table>
    <thead>
      <tr>
        <th colspan="2">Annotations I validated</th>
      </tr>
    </thead>
    <tbody>
      {% for a in validationsDone %}
      <tr>
        <td>
          <a
            id="QuerySequence"
            class="form-control"
            href="{% url 'sequence' id=a.sequence.id %}"
          >
            {{ a.sequence.id }} - {{ a.sequence.genome.id|replaceWithSpace:"_" }}</a
          >
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% endblock %}
</button>
